<!DOCTYPE html>
<html>

<head>
    <title>Cyclow - es6</title>
    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="code.css">
</head>

<body>
    <div class="container-fluid">
        <h2>
            <span>
    <a href="../index.html">JS Comp</a> &gt;
    <a href="composition.html">composition</a> &gt;
    cyclow &gt;
  </span> es6
        </h2>

        <ul class="links">
            <li class="">
                <a href="composition_cyclow_es6_info.html">info</a>
            </li>
            <li class="active">
                <a href="composition_cyclow_es6_code.html">code</a>
            </li>
            <li class="">
                <a href="composition_cyclow_es6_bootstrap.html">bootstrap.js</a>
            </li>
            <li class="">
                <a href="composition_cyclow_es6_confirm.html">confirm.js</a>
            </li>
            <li class="">
                <a href="composition_cyclow_es6_field.html">field.js</a>
            </li>
            <li class="">
                <a href="composition_cyclow_es6_form.html">form.js</a>
            </li>
        </ul>
        <h4>bootstrap.js (<a href=composition_cyclow_es6_bootstrap.html>compare</a>)</h4>
        <pre><code><span class="hljs-keyword">import</span> {run} <span class="hljs-keyword">from</span> <span class="hljs-string">'cyclow'</span>
<span class="hljs-keyword">import</span> Form <span class="hljs-keyword">from</span> <span class="hljs-string">'./form'</span>

run(Form, {target: <span class="hljs-string">'app'</span>})
</code></pre>
        <h4>confirm.js (<a href=composition_cyclow_es6_confirm.html>compare</a>)</h4>
        <pre><code><span class="hljs-keyword">import</span> {Block} <span class="hljs-keyword">from</span> <span class="hljs-string">'cyclow'</span>

<span class="hljs-keyword">const</span> viewConfirm = () =&gt; [
  {tag: <span class="hljs-string">'button'</span>, content: <span class="hljs-string">'Confirm'</span>, on: {click: <span class="hljs-string">'confirm'</span>}},
  {tag: <span class="hljs-string">'button'</span>, content: <span class="hljs-string">'Cancel'</span>, on: {click: <span class="hljs-string">'cancel'</span>}}
]

<span class="hljs-keyword">const</span> viewDefault = mode =&gt; ({
  tag: <span class="hljs-string">'button'</span>,
  content: <span class="hljs-string">'Submit'</span>,
  attrs: {disabled: mode === <span class="hljs-string">'disabled'</span>},
  on: {click: <span class="hljs-string">'maybe'</span>}
})

<span class="hljs-keyword">const</span> Confirm = () =&gt; Block({
  inputs: [<span class="hljs-string">'disabled'</span>],
  outputs: [<span class="hljs-string">'confirmation'</span>],
  on: {
    init: () =&gt; state =&gt; ({mode: <span class="hljs-string">'disabled'</span>}),
    disabled: (disabled, {mode}) =&gt; {
      <span class="hljs-keyword">if</span> (disabled) {
        <span class="hljs-keyword">return</span> state =&gt; ({mode: <span class="hljs-string">'disabled'</span>})
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">'disabled'</span>) {
        <span class="hljs-keyword">return</span> state =&gt; ({mode: <span class="hljs-string">'waiting'</span>})
      }
    },
    maybe: () =&gt; state =&gt; ({mode: <span class="hljs-string">'confirm'</span>}),
    cancel: () =&gt; state =&gt; ({mode: <span class="hljs-string">'waiting'</span>}),
    confirm: () =&gt; [state =&gt; ({mode: <span class="hljs-string">'waiting'</span>}), [<span class="hljs-string">'out.confirmation'</span>]]
  },
  view: ({mode}) =&gt; mode === <span class="hljs-string">'confirm'</span> ? viewConfirm() : viewDefault(mode)
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Confirm
</code></pre>
        <h4>field.js (<a href=composition_cyclow_es6_field.html>compare</a>)</h4>
        <pre><code><span class="hljs-keyword">import</span> {Block} <span class="hljs-keyword">from</span> <span class="hljs-string">'cyclow'</span>
<span class="hljs-keyword">import</span> Confirm <span class="hljs-keyword">from</span> <span class="hljs-string">'./confirm'</span>

<span class="hljs-keyword">const</span> Field = () =&gt; Block({
  outputs: [<span class="hljs-string">'submission'</span>],
  components: {confirm: Confirm()},
  on: {
    init: instruction =&gt; [state =&gt; ({instruction, input: <span class="hljs-string">''</span>}), <span class="hljs-string">'confirm.init'</span>],
    text: newText =&gt; state =&gt; ({...state, input: newText}),
    <span class="hljs-string">'confirm.confirmation'</span>: (_, {input}) =&gt; [
      state =&gt; ({...state, input: <span class="hljs-string">''</span>}),
      [<span class="hljs-string">'out.submission'</span>, input]
    ],
    state: ({input}) =&gt; [[<span class="hljs-string">'confirm.disabled'</span>, !input]]
  },
  view: ({instruction, input}, {confirm}) =&gt; ({content: [
    <span class="hljs-string">`<span class="hljs-subst">${instruction}</span>:`</span>,
    {
      tag: <span class="hljs-string">'input'</span>,
      attrs: {value: input},
      on: {keyup: (e, next) =&gt; next([<span class="hljs-string">'text'</span>, e.target.value])}
    },
    confirm
  ]})
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Field
</code></pre>
        <h4>form.js (<a href=composition_cyclow_es6_form.html>compare</a>)</h4>
        <pre><code><span class="hljs-keyword">import</span> {Block} <span class="hljs-keyword">from</span> <span class="hljs-string">'cyclow'</span>
<span class="hljs-keyword">import</span> Field <span class="hljs-keyword">from</span> <span class="hljs-string">'./field'</span>

<span class="hljs-keyword">const</span> Form = () =&gt; Block({
  components: {field: Field()},
  on: {
    init: () =&gt; [
      [<span class="hljs-string">'field.init'</span>, <span class="hljs-string">'Enter name'</span>],
      state =&gt; ({current: <span class="hljs-string">'Steve'</span>})
    ],
    <span class="hljs-string">'field.submission'</span>: submission =&gt; state =&gt; ({current: submission})
  },
  view: ({current}, {field}) =&gt; ({
    content: [
      field,
      {tag: <span class="hljs-string">'p'</span>, content: <span class="hljs-string">`Submitted value: <span class="hljs-subst">${current}</span>`</span>}
    ],
    attrs: {id: <span class="hljs-string">'app'</span>}
  })
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Form
</code></pre>



        <footer></footer>
    </div>
</body>

</html>