<!DOCTYPE html>
<html>

<head>
    <title>Cyclow - es6</title>
    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="code.css">
</head>

<body>
    <div class="container-fluid">
        <h2>
            <span>
    <a href="../index.html">JS Comp</a> &gt;
    <a href="firebase.html">firebase</a> &gt;
    cyclow &gt;
  </span> es6
        </h2>

        <ul class="links">
            <li class="">
                <a href="firebase_cyclow_es6_info.html">info</a>
            </li>
            <li class="active">
                <a href="firebase_cyclow_es6_code.html">code</a>
            </li>
            <li class="">
                <a href="firebase_cyclow_es6_battle.html">battle.js</a>
            </li>
            <li class="">
                <a href="firebase_cyclow_es6_bootstrap.html">bootstrap.js</a>
            </li>
        </ul>
        <h4>battle.js (<a href=firebase_cyclow_es6_battle.html>compare</a>)</h4>
        <pre><code><span class="hljs-keyword">import</span> {Block} <span class="hljs-keyword">from</span> <span class="hljs-string">'cyclow'</span>
<span class="hljs-keyword">import</span> {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">'graflow'</span>
<span class="hljs-keyword">import</span> {subscribe, nudge} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../nudger'</span>

<span class="hljs-keyword">const</span> nudger = Component({
  inputs: [<span class="hljs-string">'init'</span>, <span class="hljs-string">'nudge'</span>],
  components: {
    nudger: Component(nudge),
    subscriber: Component((v, next) =&gt; subscribe(val =&gt; next(val)))
  },
  connections: [
    [<span class="hljs-string">'in.init'</span>, <span class="hljs-string">'subscriber'</span>],
    [<span class="hljs-string">'subscriber'</span>, <span class="hljs-string">'out'</span>],
    [<span class="hljs-string">'in.nudge'</span>, <span class="hljs-string">'nudger'</span>]
  ]
})

<span class="hljs-keyword">const</span> teamButtons = state =&gt; state.teams.map((team, i) =&gt; ({
  tag: <span class="hljs-string">'button'</span>,
  on: { click: [<span class="hljs-string">'click'</span>, team] },
  content: <span class="hljs-string">`<span class="hljs-subst">${team}</span> <span class="hljs-subst">${state.status[team]}</span>`</span>
}))

<span class="hljs-keyword">const</span> Battle = () =&gt; Block({
  components: {nudger},
  events: {
    init: () =&gt; [
      <span class="hljs-string">'nudger.init'</span>,
      state =&gt; ({
        loaded: <span class="hljs-literal">false</span>,
        status: {},
        teams: []
      })
    ],
    click: team =&gt; [[<span class="hljs-string">'nudger.nudge'</span>, team]],
    nudger: val =&gt; state =&gt; ({
      loaded: <span class="hljs-literal">true</span>,
      teams: <span class="hljs-built_in">Object</span>.keys(val).sort(),
      status: val
    })
  },
  view: state =&gt; ({content: state.loaded
    ? teamButtons(state)
    : <span class="hljs-string">'Fetching data...'</span>
  })
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Battle
</code></pre>
        <h4>bootstrap.js (<a href=firebase_cyclow_es6_bootstrap.html>compare</a>)</h4>
        <pre><code><span class="hljs-keyword">import</span> {run} <span class="hljs-keyword">from</span> <span class="hljs-string">'cyclow'</span>
<span class="hljs-keyword">import</span> Battle <span class="hljs-keyword">from</span> <span class="hljs-string">'./battle'</span>

run(Battle, {target: <span class="hljs-string">'app'</span>})
</code></pre>



        <footer></footer>
    </div>
</body>

</html>